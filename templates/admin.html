{% extends "layout.html" %}
{% block content %}
<div class="row mb-4">
<div class="col-md-8">
    <h3>Panel de AdministraciÃ³n</h3>
    <p>Gestiona categorÃ­as, productos, pedidos y cÃ³digos QR</p>
</div>
<div class="col-md-4 text-end">
    <a href="{{ url_for('admin_logout') }}" class="btn btn-outline-danger">
        Cerrar SesiÃ³n
    </a>
</div>
</div>

<!-- Enlaces rÃ¡pidos -->
<div class="row mb-4">
    <div class="col-md-3">
        <a href="{{ url_for('admin_orders') }}" class="btn btn-info w-100 mb-2">
            <strong>ğŸ“‹ Pedidos</strong><br>
            <small>Ver pedidos activos</small>
        </a>
    </div>
    <div class="col-md-3">
        <a href="{{ url_for('admin_qr_codes') }}" class="btn btn-primary w-100 mb-2">
            <strong>ğŸ“± CÃ³digos QR</strong><br>
            <small>Generar QR para mesas</small>
        </a>
    </div>
    <div class="col-md-3">
        <a href="{{ url_for('new_category') }}" class="btn btn-success w-100 mb-2">
            <strong>â• Nueva CategorÃ­a</strong>
        </a>
    </div>
    <div class="col-md-3">
        <a href="{{ url_for('index') }}" class="btn btn-outline-light w-100 mb-2">
            <strong>ğŸ  Ver MenÃº</strong>
        </a>
    </div>
</div>

<hr>

<div class="mb-3">
<h4>CategorÃ­as</h4>
</div>

<table class="table table-dark table-striped">
<thead>
    <tr>
    <th>Orden</th><th>Nombre</th><th>Imagen</th><th>Acciones</th>
    </tr>
</thead>
<tbody>
    {% for c in categories %}
    <tr>
    <td data-label="Orden">{{ c.order }}</td>
    <td data-label="Nombre">{{ c.name }}</td>
    <td data-label="Imagen" style="width:120px;">
        {% if c.image %}
        <img src="{{ c.image }}" style="height:60px; max-width:100%;" />
        {% else %}
        <span class="text-muted">Sin imagen</span>
        {% endif %}
    </td>
    <td data-label="Acciones">
        <a href="{{ url_for('manage_products', category_id=c._id|string) }}" class="btn btn-sm btn-info">Productos</a>
        <a href="{{ url_for('edit_category', id=c._id|string) }}" class="btn btn-sm btn-warning">Editar</a>
        <form method="POST" action="{{ url_for('delete_category', id=c._id|string) }}" class="d-inline-block" onsubmit="return confirm('Â¿Eliminar esta categorÃ­a?')">
        <button class="btn btn-sm btn-danger">Borrar</button>
        </form>
    </td>
    </tr>
    {% endfor %}
</tbody>
</table>
{% endblock %}
